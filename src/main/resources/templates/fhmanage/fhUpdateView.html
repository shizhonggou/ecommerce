<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" >
<head>
    <link  th:href="@{/css/bass.css}" rel="stylesheet" type="text/css" />
    <script th:src="@{/js/jquery.min.js}" type="text/javascript"></script>
    <script th:src="@{/js/userInfo.js}" type="text/javascript"></script>
    <script th:src="@{/js/resource.js}" type="text/javascript"></script>
    <script th:src="@{/js/systemsettings.js}" ></script>
    <meta content="text/html; charset=utf-8" http-equiv=Content-Type>
    <meta http-equiv="X-UA-Compatible" content="IEedge">
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <script language="javascript" type="text/javascript" th:src="@{/js/My97DatePicker/WdatePicker.js}"></script>
    <link  th:href="@{/css/base.css}" rel="stylesheet" type="text/css"/>
    <script th:src="@{/js/chosen.js}" type="text/javascript"></script>
    <link th:href="@{/css/chosen.css}" rel="stylesheet" type="text/css"/>
    <title>仓库信息修改</title>
</head>
<body th:onload="onload();">
<div th:insert="~{header :: header}"></div>
<section>
    <div class="main w1000">
        <aside>
            <div th:insert="~{left :: left(fhmanage)}"></div>
        </aside>
        <aside>
            <div class="resources">
                <div class="resources_tt" th:include="common::varietyTag2"></div>
                <div class="pozition"><p>当前位置：会员中心  &gt; 到站码运费管理    &gt; 修改</p></div>
                <form action="/fhmanage/fhUpdate" name="huiFuLY" id="lybform"  method="POST"   onsubmit="return checkForm()">
                    <table class="Information" cellspacing="0" cellpadding="0" border="0">
                        <tbody>
                        <tr>
                            <dd sec:authorize="hasAuthority('ROLE_GYLQX_PTF')"> 
                            <td>公司名称<span>*</span></td>
                            <td style="position:relative;" id="searchtd">
                                <div class="searchBox">
                                  <input type="text" autocomplete="off"  id="cameName" th:value="${fhdetail.cangkuid} " name="company_name" placeholder="请输入公司名称" onkeyup="getCameraNames()"  style="width:180px;" />
                                   <input type="hidden" name="companyname" id="companyid" th:value="${fhdetail.mid}">
                                   <input type="hidden" id="parameterName" th:value="${_csrf.parameterName}">
                                   <input type="hidden" id="token" th:value="${_csrf.token}">
                              
                                </div>
                                <!--搜索提示框 -->
                                <div class="searchDiv">
                                </div>
                                <div  id="dataList"  style="display:none;" >
                                    <p th:each="item:${tmpcompay}" th:id="${item.id}" th:text="${item.comname}"></p>
                                </div>  
                        </td>
                        </dd> 
                        </tr>
                        <tr>
                        <td>发货仓库<span>*</span></td>
                            <!--<input type="text" name="cangkuname" id="cangkuname" th:value="${fhdetail.cangkuname}" > -->
                            <td ><select name="cangkuname" style ="height: 27px;min-width: 173px; text-indent: 10px;color: #666666;">
                                    <span th:each="list:${cangkunamearr}">
                                    <option th:if="${list.description} eq ${fhdetail.cangkuname}" selected th:value ="${list.description}" th:text="${list.description}"></option>
                                    <option th:if="${list.description} ne ${fhdetail.cangkuname}" th:value ="${list.description}" th:text="${list.description}"></option>
                                    </span>
                                  </select>
                            </td>


                  
                        </tr>
                        <tr>
                            <td>到站<span>*</span></td>
                            <td ><input type="text" name="daozhanCangkuName" id="daozhanCangkuName" th:value="${fhdetail.daozhanCangkuName}" > </td>
                            <dd sec:authorize="hasAuthority('ROLE_GYLQX_PTF') and (hasAuthority('ROLE_GYLQX_MASTER') or hasAuthority('ROLE_GYLQX_MASTERXS'))">
                            </tr>
                            <tr>
                            <td>运  费<span>*</span></td> 
                            <td ><input type="text" name="yunfei" id="yunfei" th:value="${fhdetail.yunfei}" > </td>
                        </dd>
                            
                        </tr>
                        <tr>
                            <td>备注说明</td>
                            <td ><input type="text" name="remark" id="remark" th:value="${fhdetail.remark}" > </td>
                        
                            <input type="hidden" name="daozhanma" id="daozhanma" th:value="${fhdetail.daozhanma}" > 
                        </tr>
                        </tbody>
                    </table>
                    <div style="text-align: center;">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                        <input type="hidden"  name="id" th:value="${fhdetail.id}">
                        <input th:if="${pingTaiID} ne ${COMID}" type="hidden" th:value="${COMID}" name="company_name" id="company_name2" >
                        <input type="submit" value="保存"  style="background: #FF6632;color: white;width: 300px;height: 30px;border: 0;cursor:pointer;">
                    </div>
                </form>
            </div>
        </aside>
    </div>
</section>
<div th:insert="~{footer :: footer}"></div>
<div th:include="common::commonFooter"></div>

<script>
// 检查用户名 是否重复
function ajaxcheckuname(){
    // 校验用户名 只能是 数字字母 下划线
    var regUN = /^[0-9a-zA-Z_]{1,}$/;
    var user_name=document.getElementById("user_name").value.replace(/\s*/g,"");
    if (user_name == '' || user_name ==null) {
            alert("请输入用户名");
            user_name.focus();
            return false;
    } else if(!regUN.test(user_name)) {
            alert("用户名只能包含数字、字母、下划线");
            user_name.focus();
            return false;
    }
	$.ajax({
                type: "POST",
                url: "/userInfo/checkUName",
                data: {'user_name': user_name,"[[${_csrf.parameterName}]]": "[[${_csrf.token}]]"},
        success: function(data) {
			if(data==0){
			    alert("用户名重复，不可用");
			    var user_name2 = document.getElementById("user_name");
			    user_name2.value = '';
                return;
		    }
		},
	    error: function(request, status, error){
                        console.log(error);
        }
        });
}
    // 检查手机号码 是否重复
function ajaxchecktel(){
    // 校验手机号
    var regMobile = /^1[3,4,5,7,8]\d{9}$/;
    var mobile=document.getElementById("mobile").value.replace(/\s*/g,"");
    if (mobile == '' || mobile ==null) {
            alert("请输入手机号码");
            return false;
        } else if(!regMobile.test(mobile)){
            alert("请输入正确的手机号码");
            return false;
        }
		$.ajax({
		        type: "POST",
                url: "/userInfo/checkMobile",
                data: {'mobile': mobile,"[[${_csrf.parameterName}]]": "[[${_csrf.token}]]"},
        success: function(data) {
			if(data==0){
			    alert("手机号重复，不可用");
			    var mobile2=document.getElementById("mobile");
			    mobile2.value = '';
                return;
		    }
		},
	    error: function(request, status, error){
                        console.log(error);
        }
        });
}


function checkForm(){
      if ($("#company_name").val() == "") {
          alert("公司不能为空");
          return false;
      }
      if ($("#cangkuname").val() == "") {
          alert("仓库不能为空");
          return false;
      }

      if ($("#yunfei").val() == "") {
          alert("运费不能为空");
          return false;
      }

      if ($("#daozhanCangkuName").val() == "") {
          alert("到站仓库不能为空");
          return false;
      }



  }









</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <title>仓库资源操作日志</title>
    <script th:src="@{/js/jquery-3.2.1.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/ajax.js}"></script>
    <script language="javascript" type="text/javascript" th:src="@{/js/My97DatePicker/WdatePicker.js}"></script>
    <script type="text/javascript" th:src="@{/js/layui/layui.all.js}"></script>
    <link th:href="@{/js/layui/css/layui.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/css/base.css}" rel="stylesheet" type="text/css"/>
    <style>
        .steel_list_table input[type="text"] {
            border: 1px solid #dedede;
            text-align: center;
            padding: 1px 2px;
            width: 50px;
            height: 22px;
        }

        .ss input, .ss select {
            border: 1px solid #dedede;
            width: 95px;
            height: 28px;
            line-height: 28px;
            padding: 0 5px;
        }

        .ss td {
            padding: 5px 20px;
        }
    </style>
</head>
<body>
<div th:insert="~{header :: header}"></div>

<section>
    <div class="main w1000">
        <div th:insert="~{left :: left('resource_action')}"></div>
        <aside>
            <div class="resources">
                <div class="resources_tt" th:include="common::varietyTag2"></div>

                <div class="pozition">
                    <p>当前位置：会员中心 &gt; 资源管理 &gt; 仓库资源日志</p>
                </div>

                <section>
                    <div class="steel_list w830">
                        <div class="ss">
                            <form name="form1" id="form1" th:action="@{'/warehouse_resource/resource_action'}" method="post">
                                <table cellspacing="0" cellpadding="0" border="0">
                                    <tbody>

                                    <tr>
                                        <td><p>日期：</p><input type="text" th:name="createTime"
                                                             style="text-align:left;" class="Wdate"
                                                             th:onclick="@{'WdatePicker({dateFmt:\'yyyy-MM-dd\'})'}"
                                                             th:value="${#dates.format(warehouseResourceAction.createTime, 'yyyy-MM-dd')}"
                                                             autocomplete="off"/></td>
                                        <td><p>操作类型：</p>
                                            <select class="form-control" >
                                                <option th:each="keyStr:${T(com.isechome.ecommerce.constant.CommonConstant).WAREHOUSE_ACTION_TYPE}" th:value="${keyStr}" th:text="${T(com.isechome.ecommerce.constant.CommonConstant).WAREHOUSE_ACTION_TYPE.get(keyStr)}"></option>
                                            </select>
                                        </td>
                                        <!--
                                        <td><p>品名：</p><input type="text" name="varietyName" id="varietyName"
                                                             th:value="${shelfResource.varietyName}" size="18"></td>
                                        <td><p>材质：</p><input type="text" name="material" id="material"
                                                             th:value="${shelfResource.material}" size="18"></td>
                                        <td><p>规格：</p><input type="text" name="specification" id="specification"
                                                             th:value="${shelfResource.specification}" size="18">
                                            <p></td>
                                        <td><p>产地：</p><input type="text" name="factory" id="factory"
                                                             th:value="${shelfResource.factory}" size="18"></td>
                                        <td><p>仓库：</p><input type="text" name="warehouse" id="warehouse"
                                                             th:value="${shelfResource.warehouse}" size="18"></td>
                                        -->
                                    </tr>
                                    <tr>

                                        <input type="hidden" name="page" id="page"/>
                                        <input type="hidden" th:name="${_csrf.parameterName}"
                                               th:value="${_csrf.token}"/>
                                        <td colspan="2"><a href="javascript:find();">搜索</a></td>
                                    </tr>

                                    </tbody>
                                </table>
                            </form>
                        </div>
                        <form name="form2" id="form2" action="" method="post">
                            <table class="steel_list_table w830" cellspacing="0" cellpadding="0" border="0">
                                <thead>
                                <tr>
                                    <!--            <td class="checkbox">全选 <input type='checkbox' id="selallbox" onclick="selall();"/></td>-->
                                    <td>资源id</td>
                                    <td>资源量</td>
                                    <td>预留量</td>
                                    <td>预留日期</td>
                                    <td>操作类型</td>
                                    <td>操作时间</td>
                                    <td>操作人</td>
                                    <td>平台方</td>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="list:${warehouseResourceActionList}">
                                    <!--            <td class="checkbox"><input type='checkbox' name='checkednum' th:id="@{'checkednum_'+${list.id}}" th:value="${list.id}"/></td>-->
                                    <td th:text="${list.getWId()}"></td>
                                    <td th:text="${ list.num == null } ? '' :  ${T(cn.hutool.core.util.NumberUtil).decimalFormat('####.###',list.num)}"></td>
                                    <td th:text="${ list.reservedNum == null } ? '' :  ${T(cn.hutool.core.util.NumberUtil).decimalFormat('####.###',list.reservedNum)}"></td>
                                    <td th:text="${ list.reservedDate == null } ? '' : ${ #dates.format( list.reservedDate, 'yyyy-MM-dd' ) }"></td>
                                    <td th:text="${list.typeName}"></td>
                                    <td th:text="${ #dates.format( list.createTime, 'yyyy-MM-dd HH:mm' ) }"></td>
                                    <td th:text="${list.userName}"></td>
                                    <td th:text="${list.pmName}"></td>
                                </tr>
                                </tbody>
                            </table>

                            <div class="page">

                                <a th:href="'javascript:queryDeviceRecords('+${pageInfo.prePage}+');'">上一页</a>

                                <p th:each="navigatepageNum:${pageInfo.navigatepageNums}">
                                    <a th:if="${navigatepageNum} eq ${pageInfo.pageNum}" class="now"
                                       th:text="${navigatepageNum}"></a>
                                    <a th:if=" ${navigatepageNum} ne ${pageInfo.pageNum}"
                                       th:href="'javascript:queryDeviceRecords('+${navigatepageNum}+');'"
                                       th:text="${navigatepageNum}"></a>
                                </p>
                                <a th:href="'javascript:queryDeviceRecords('+${pageInfo.nextPage}+');'">下一页</a>


                                <span>到第</span>
                                <input type="text" id="jump_num">
                                <span>页</span>
                                <button type="button" onclick="jumppage();">确定</button>
                            </div>
                        </form>
                        <div style="clear:both"></div>
                    </div>
                </section>
            </div>
        </aside>
    </div>
</section>

<div th:insert="~{footer :: footer}"></div>
<div th:include="common::commonFooter"></div>
</body>
<script>
    $(function () {
        //禁用“确认重新提交表单”
        window.history.replaceState(null, null, window.location.href);
    });

    // 翻页
    function jumppage() {
        var pageNum = document.getElementById("jump_num").value;
        if (pageNum > 0) {
            queryDeviceRecords(pageNum);
        }
    }

    function find(pageNum) {
        document.getElementById('form1').submit();
    }

    function queryDeviceRecords(pageNum) {
        $("#page").val(pageNum);
        document.getElementById('form1').submit();
    }

</script>
</html>